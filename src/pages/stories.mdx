---
title: Stories
---

import Layout from "../components/Layout"
import StoryCard from "../components/StoryCard"
import Gallery from '../components/Gallery'
import { graphql, Link } from "gatsby"
import { jsx } from 'theme-ui'
import Dropdown from '../components/Dropdown'

<Layout>

# All Stories

<Dropdown props={props} />

<br />
<br />

Click to listen to the stories!

<br/>
<Gallery n={3}>
{props.data.stories.edges.map((edge, i) => (
	<StoryCard
    id={edge.node.id}
		photoUrl={edge.node.data.Photo[0].thumbnails.large.url}
		title={edge.node.data.Story_Name}
		author={edge.node.data.Author}
		audio={edge.node.data.Audio ? (edge.node.data.Audio[0].url) : ''}
	/>
))}
</Gallery>
</Layout>

export const pageQuery = graphql`
query {
    stories: allAirtable(filter: {table: {eq: "Stories"}}) {
        edges {
            node {
                id
                data {
                    Author
                    Status
                    Story_Name
                    Photo {
                        thumbnails {
                            large {
                                url
                            }
                        }
                    }
                    Audio {
                        url
                    }
                    School
                    Tags
                    Grade
                    Transcript
                }
            }
        }
    }
    tags: allAirtable(filter: {table: {eq: "Stories"}}) {
        group(field: data___Tags) {
            fieldValue
        }
    }
    states: allAirtable(filter: {table: {eq: "Stories"}}) {
        group(field: data___State) {
            fieldValue
        }
    }
    schools: allAirtable(filter: {table: {eq: "Stories"}}) {
        group(field: data___School) {
            fieldValue
        }
    }
}
`
